<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mes.bf.eqp.mapper.MchnMapper">

	<insert id="mchnInsert" parameterType="MchnVO">
		insert into bf_eqp_mchn
		values('MCHN'||LPAD(BF_EQP_MCHN_CODE_SEQ.nextval, 3, 0),
				#{mchnName},
				#{vendCdCode},
				#{mchnModel},
				#{mchnPrice},
				#{mchnPrchsDate},
				#{mchnMnfctDate},
				#{mchnStts},
				#{mchnInspcDate},
				#{mchnInspcCycle},
				#{mchnRemk})
	</insert>
	
	<update id="mchnUpdate">
		UPDATE bf_eqp_mchn 
		SET ${updCol} = #{updCont}
		WHERE FLTY_PRCS_NO = #{prikey}
	</update>

	<select id="listMchn" resultType="MchnVO">
		SELECT mc.mchn_code, 
				mc.mchn_name, 
				NVL(mc.mchn_model, ' ') AS mchn_model, 
				mc.mchn_mnfct_date,
		       	mc.mchn_inspc_cycle, 
		       	NVL(mc.mchn_stts,  ' ') AS mchn_stts, 
		       	NVL(mc.mchn_remk, ' ') AS mchn_remk, 
		       	vcd.vend_cd_nm, 
		       	inp.inspc_edate
		FROM BF_EQP_MCHN mc JOIN bf_cmn_vendor_code vcd
			ON mc.vend_cd_code = vcd.vend_cd_code
		LEFT OUTER JOIN BF_EQP_INSPC inp
			ON inp.mchn_code = mc.mchn_code
		<if test="mchnCode != null and mchnCode != ''">
			WHERE mc.mchn_code = #{mchnCode}
		</if>
		ORDER BY mchn_code
	</select>
	
</mapper>